# 3. Trials and Tribulations

In our second week on Acebook we're managing to successfully implement a number of useful things. We've taken to organising our work in two-day sprints, using the Kanban board to rank our tasks by complexity, which has improved our workflow enormously.

We've also hit a number of blocks in the way, and much as these have been frustrating, working through them has been a useful exercise in itself, especially when it seems impossible to get to the bottom of. Let's take a particularly unpredictable problem we had getting our web app to display the timestamp on posts in the correct time zone. When we first implemented timestamps for posts we discovered that it would consistently display the time as posted one hour previously. This was rather bizarre; we realised that given we're working during Daylight Savings Time in the UK, this is one hour ahead of UTC, which is used as standard for timestamps in Rails. At first we couldn't find a way to break through this into a fix, but as usual there things to gain from the experience:

* **A fresh pair of eyes is invaluable**, either your own after a break, or another team member who takes a look afresh at a problem you're stuck on. In our case this was to confirm to Gadiza that no, you're not going crazy, this is an objectively weird and difficult problem without a simple solution.
* **Some problems are just local to one computer.** In trying to replicate the problem on another machine, we discovered we could post and view posts with the correct local timestamps. It was as if our codebase considered our two machines, next to each other in the same room, as in two different time zones.
* **Sometimes not being able to reproduce a problem is in itself a problem.** After restarting the initial computer on which we had this problem, it vanished. One could say this is convenient, but of course in commercial deployment it would inevitably reappear in the wild. We were unable to work at it until it reared its ugly head again unexpectedly...
* **Your testing environment may differ from your development environment in unpredictable ways.** Once we'd implemented Travis CI as an intermediary between pushing patches to the master and automatically deploying them, the same problem popped up again. When Travis ran the same RSpec tests that passed effortlessly on our machines, it honestly spat out the following error: `expected to find text "05/16/2018 11:23" in "Hello, World! Post created on 05/16/2018 12:23"`. Travis' apparent determination to straddle two time zones is not something we could control for, especially when we couldn't reproduce the problem on a development machine any longer. So where to go from here?
* **Sometimes a bug fix can result in a better feature altogether.** In the end, it occurred to us that a much better way of displaying the texts would be making use of Rails' `time_ago_in_words` method, which conveniently calculates the elapsed time since the post, and displays this in a user-friendly format. This is a much more objective measure which avoids relying on time zone information at all- a post from the other side of the world can show up on our screen as 'under a minute ago' regardless of the time difference. Implementing this allowed us to rewrite and pass the feature test without any difficulty. Arguably this could be considered a workaround rather than a fix for the problem, but it's undeniably a better implementation of this feature, which is the most important thing.
